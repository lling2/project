{"version":3,"sources":["webpack://vip-site-pratice-1/./src/components/Loading/loading.tsx","webpack://vip-site-pratice-1/./src/components/Totast/totast.tsx","webpack://vip-site-pratice-1/./src/hooks/index.tsx","webpack://vip-site-pratice-1/./src/hooks/useLoginCheck.tsx","webpack://vip-site-pratice-1/./src/hooks/useViewport.tsx","webpack://vip-site-pratice-1/./src/pages/BestPratice/Book.tsx","webpack://vip-site-pratice-1/./src/pages/BestPratice/bestPratice.tsx","webpack://vip-site-pratice-1/./src/components/Totast/totast.css?1dd3","webpack://vip-site-pratice-1/./src/pages/BestPratice/bestPratice.css?92bf"],"names":["Loading","bgOpacity","Totast","visible","msg","useState","isShow","setIsShow","useEffect","timer","setTimeout","clearTimeout","React","loginCheck","history","useHistory","location","useLocation","loginStatus","setLoginStatus","useRecoilState","loginState","loginInfo","setLoginInfo","initLogin","storage","push","pathname","state","from","alert","useViewport","window","innerHeight","wh","setWH","innerWidth","ww","setWW","handleWindowResize","addEventListener","removeEventListener","Book","props","goInfo","con","goPraticeInfo","path","id","backgroundImage","poster","title","QuesBank","bookList","setBookList","loading","setLoading","useLoginCheck","useRecoilValue","loginSel","uid","isError","setIsError","_componentStatus","useRef","current","pratice","then","res","status","praticeList","count","length","data","forEach","item","index","err","require","map","book","bdx"],"mappings":";;;;;;;;;;;;;;;AAAA;AACA;;AAMA,IAAMA,OAAkB,GAAG,SAArBA,OAAqB,OAA0B;AAAA,4BAAvBC,SAAuB;AAAA,MAAvBA,SAAuB,+BAAX,IAAW;AACnD,sBACE,iHACE;AACE,aAAS,+BACPA,SAAS,GAAG,4BAAH,GAAkC,EADpC;AADX,kBAKA;AAAK,aAAS,EAAC;AAAf,kBACA,8DADA,eAEI,8DAFJ,eAGI,8DAHJ,eAII,8DAJJ,eAKI,8DALJ,eAMI,8DANJ,eAOI,8DAPJ,eAQI,8DARJ,CALA,CADF,CADF;AAoBD,CArBD;;AAuBA,iEAAeD,OAAf,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9BA;AACA;;AAOA,IAAME,MAAmB,GAAG,SAAtBA,MAAsB,OAAyC;AAAA,0BAAtCC,OAAsC;AAAA,MAAtCA,OAAsC,6BAA5B,KAA4B;AAAA,sBAArBC,GAAqB;AAAA,MAArBA,GAAqB,yBAAf,QAAe;;AACnE,kBAA4BC,+CAAQ,CAAC,IAAD,CAApC;AAAA;AAAA,MAAOC,MAAP;AAAA,MAAeC,SAAf;;AACAC,kDAAS,CAAC,YAAM;AACd,QAAIC,KAAK,GAAGC,UAAU,CAAC,YAAM;AAC3BH,eAAS,CAAC,KAAD,CAAT;AACD,KAFqB,EAEnB,IAFmB,CAAtB;AAGA,WAAO,YAAM;AACXI,kBAAY,CAACF,KAAD,CAAZ;AACD,KAFD;AAGD,GAPQ,EAON,EAPM,CAAT;AAQA,sBACE,oGACGN,OAAO,IAAIG,MAAX,gBACC;AAAK,aAAS,EAAC;AAAf,kBACE;AAAK,aAAS,EAAC;AAAf,KAA0BF,GAA1B,CADF,CADD,GAIG,IALN,CADF;AASD,CAnBD;;AAqBA,8EAAeQ,uCAAA,CAAWV,MAAX,CAAf,E;;;;;;;;;;;;;;;;;;AC7BA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAMW,UAAU,GAAG,SAAbA,UAAa,GAAM;AACvB;AACA,MAAMC,OAAO,GAAGC,4DAAU,EAA1B;AACA,MAAMC,QAAQ,GAAGC,6DAAW,EAA5B;;AAEA,kBAAsCZ,+CAAQ,CAAC,CAAD,CAA9C;AAAA;AAAA,MAAOa,WAAP;AAAA,MAAoBC,cAApB;;AACA,wBAAkCC,sDAAc,CAACC,gEAAD,CAAhD;AAAA;AAAA,MAAOC,SAAP;AAAA,MAAkBC,YAAlB;;AACAf,kDAAS,CAAC,YAAM;AACd,QAAIU,WAAW,KAAK,CAApB,EAAuB;;AACvB,QAAIA,WAAW,IAAI,CAAC,CAAhB,IAAqBA,WAAW,IAAI,CAAC,CAAzC,EAA4C;AAC1CK,kBAAY,CAACC,4DAAS,EAAV,CAAZ;AACAC,8DAAA,CAAe,UAAf;AACAX,aAAO,CAACY,IAAR,CAAa;AACXC,gBAAQ,EAAE,QADC;AAEXC,aAAK,EAAE;AACLC,cAAI,EAAE;AACJF,oBAAQ,EAAEX,QAAQ,CAACW;AADf;AADD;AAFI,OAAb;AAQD,KAXD,MAWK;AACHG,WAAK,CAAC,QAAD,CAAL;AACD;AACF,GAhBQ,EAgBN,CAACZ,WAAD,CAhBM,CAAT;AAiBA,SAAO;AAAEA,eAAW,EAAXA,WAAF;AAAeC,kBAAc,EAAdA;AAAf,GAAP;AACD,CAzBD;;AA0BA,iEAAeN,UAAf,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;CCjCA;;AAEA,IAAMkB,WAAW,GAAG,SAAdA,WAAc,GAAM;AACxB;AACA,kBAAoB1B,+CAAQ,CAAS2B,MAAM,CAACC,WAAhB,CAA5B;AAAA;AAAA,MAAOC,EAAP;AAAA,MAAWC,KAAX;;AACA,mBAAoB9B,+CAAQ,CAAS2B,MAAM,CAACI,UAAhB,CAA5B;AAAA;AAAA,MAAOC,EAAP;AAAA,MAAWC,KAAX,iBAHwB,CAKxB;;;AACA9B,kDAAS,CAAC,YAAM;AACd,QAAM+B,kBAAkB,GAAG,SAArBA,kBAAqB,GAAM;AAC/BJ,WAAK,CAACH,MAAM,CAACC,WAAR,CAAL;AACAK,WAAK,CAACN,MAAM,CAACI,UAAR,CAAL;AACD,KAHD,CADc,CAKd;;;AACAJ,UAAM,CAACQ,gBAAP,CAAwB,QAAxB,EAAkCD,kBAAlC,EANc,CAOd;;AACA,WAAO;AAAA,aAAMP,MAAM,CAACS,mBAAP,CAA2B,QAA3B,EAAqCF,kBAArC,CAAN;AAAA,KAAP;AACD,GATQ,EASN,EATM,CAAT;AAWA,SAAO;AAACF,MAAE,EAAFA,EAAD;AAAKH,MAAE,EAAFA;AAAL,GAAP;AACD,CAlBD;;AAmBA,iEAAeH,WAAf,E;;;;;;;;;;;;;;;;ACtBA;;AAOA,IAAMW,IAGJ,GAAG,SAHCA,IAGD,CAACC,KAAD,EAAW;AACd;AACA,MAAQC,MAAR,GAAwBD,KAAxB,CAAQC,MAAR;AAAA,MAAgBC,GAAhB,GAAwBF,KAAxB,CAAgBE,GAAhB;;AACA,MAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACC,IAAD,EAAeC,EAAf,EAA8B;AAClDJ,UAAM,CAACG,IAAD,EAAOC,EAAP,CAAN;AACD,GAFD;;AAGA,sBACE,iHACE;AAAK,aAAS,EAAC;AAAf,kBACE;AAAI,aAAS,EAAC;AAAd,kBACE,0EACE;AACE,aAAS,EAAC,kBADZ;AAEE,SAAK,EAAE;AAAEC,qBAAe,gBAASJ,GAAG,CAACK,MAAb;AAAjB;AAFT,IADF,CADF,eAUE,4DAVF,CADF,eAaE;AAAI,aAAS,EAAC,MAAd;AAAqB,WAAO,EAAE;AAAA,aAAMJ,aAAa,CAACD,GAAG,CAACE,IAAL,EAAWF,GAAG,CAACG,EAAf,CAAnB;AAAA;AAA9B,kBACE,4DADF,eAEE;AAAI,aAAS,EAAC;AAAd,kBACE,6DAAKH,GAAG,CAACM,KAAT,CADF,eAEE;AAAM,aAAS,EAAC;AAAhB,gCAFF,CAFF,eAME,4DANF,eAOE,4DAPF,eAQE,4DARF,CAbF,eAuBE;AAAI,aAAS,EAAC;AAAd,kBACE,4DADF,eAEE,4DAFF,CAvBF,eA2BE;AAAI,aAAS,EAAC;AAAd,kBACE,4DADF,eAEE,4DAFF,CA3BF,CADF,CADF;AA6CD,CAtDD;;AAuDA,8EAAevC,uCAAA,CAAW8B,IAAX,CAAf,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9DA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAMU,QAAgB,GAAG,SAAnBA,QAAmB,GAAM;AAC7B,MAAMtC,OAAO,GAAGC,4DAAU,EAA1B;;AACA,kBAAgCV,+CAAQ,CAAC,EAAD,CAAxC;AAAA;AAAA,MAAOgD,QAAP;AAAA,MAAiBC,WAAjB;;AACA,mBAA8BjD,+CAAQ,CAAC,IAAD,CAAtC;AAAA;AAAA,MAAOkD,OAAP;AAAA,MAAgBC,UAAhB;;AACA,uBAA2BC,2DAAa,EAAxC;AAAA,MAAQtC,cAAR,kBAAQA,cAAR;;AACA,wBAAgBuC,sDAAc,CAACC,sEAAD,CAA9B;AAAA,MAAQC,GAAR,mBAAQA,GAAR;;AACA,mBAA6BvD,+CAAQ,CAAC,KAAD,CAArC;AAAA;AAAA,MAAOwD,OAAP;AAAA,MAAeC,UAAf;;AACA,MAAIC,gBAAgB,GAAGC,6CAAM,CAAC,IAAD,CAA7B;;AACAxD,kDAAS,CAAC,YAAM;AACd,WAAO,YAAM;AACXuD,sBAAgB,CAACE,OAAjB,GAA2B,KAA3B;AACD,KAFD;AAGD,GAJQ,EAIN,EAJM,CAAT;AAKAzD,kDAAS,CAAC,YAAM;AACd0D,sEAAA,CACsBN,GADtB,EAEGO,IAFH,CAEQ,UAACC,GAAD,EAAS;AACb,UAAI,CAACL,gBAAgB,CAACE,OAAtB,EAA+B;AAC7BF,wBAAgB,GAAG,IAAnB;AACA;AACD;;AACD5C,oBAAc,CAACiD,GAAG,CAACC,MAAL,CAAd;AACA,UAAIC,WAAmB,GAAG,EAA1B;AACA,UAAIC,KAAK,GAAG,CAAZ;AACA,UAAIC,MAAM,GAAGJ,GAAG,CAACK,IAAJ,CAASD,MAAtB;AACAJ,SAAG,CAACK,IAAJ,CAASC,OAAT,CAAiB,UAACC,IAAD,EAAWC,KAAX,EAA6B;AAC5C,YAAIA,KAAK,KAAK,CAAd,EAAiB;AACfN,qBAAW,CAACC,KAAK,GAAG,CAAT,CAAX,GAAyB,EAAzB;AACD,SAFD,MAEO,IAAIK,KAAK,KAAK,IAAIL,KAAlB,EAAyB;AAC9BD,qBAAW,CAACC,KAAD,CAAX,GAAqB,EAArB;AACAA,eAAK;AACN;;AACD,YAAIK,KAAK,IAAI,IAAIL,KAAjB,EAAwB;AACtBD,qBAAW,CAACC,KAAK,GAAG,CAAT,CAAX,CAAuB7C,IAAvB,CAA4BiD,IAA5B;AACD;AACF,OAVD;AAWArB,iBAAW,CAACgB,WAAW,IAAI,EAAhB,CAAX;AACAd,gBAAU,CAAC,KAAD,CAAV;AACD,KAxBH,WAyBS,UAACqB,GAAD,EAAS;AACdf,gBAAU,CAAC,IAAD,CAAV;AACD,KA3BH;AA4BD,GA7BQ,EA6BN,EA7BM,CAAT;;AA8BA,MAAMlB,MAAM,GAAG,SAATA,MAAS,CAACG,IAAD,EAAeC,EAAf,EAA8B;AAC3ClC,WAAO,CAACY,IAAR,CAAa;AAAEC,cAAQ,iBAAV;AAA6BC,WAAK,EAAE;AAAEmB,YAAI,EAAJA,IAAF;AAAQC,UAAE,EAAFA;AAAR;AAApC,KAAb;AACD,GAFD;;AAGA,sBACE,iHACE,iDAAC,2CAAD;AAAU,YAAQ,EAAEhD,gEAAOA;AAA3B,kBACE;AAAK,aAAS,EAAC;AAAf,kBACE;AAAK,aAAS,EAAC;AAAf,KACG,CAACuD,OAAD,gBACC;AACE,OAAG,EAAEuB,mBAAO,CAAC,uEAAD,CADd;AAEE,aAAS,EAAC,YAFZ;AAGE,OAAG,EAAC;AAHN,IADD,GAMG,IAPN,EAQGzB,QAAQ,CAAC0B,GAAT,CAAa,UAACJ,IAAD,EAAOC,KAAP;AAAA,wBACZ;AAAK,eAAS,EAAC,cAAf;AAA8B,SAAG,EAAEA;AAAnC,oBACE;AAAK,eAAS,EAAC;AAAf,OACGD,IAAI,CAACI,GAAL,CAAS,UAACC,IAAD,EAAcC,GAAd;AAAA,0BACR,iDAAC,0CAAD;AAAM,WAAG,EAAED,IAAX;AAAiB,WAAG,EAAEA,IAAI,CAAChC,EAA3B;AAA+B,cAAM,EAAEJ;AAAvC,QADQ;AAAA,KAAT,CADH,CADF,CADY;AAAA,GAAb,CARH,CADF,CADF,EAsBGW,OAAO,gBAAG,iDAAC,gEAAD,OAAH,GAAiB,IAtB3B,CADF,eAyBE,iDAAC,8DAAD;AAAQ,WAAO,EAAEM;AAAjB,IAzBF,CADF;AA6BD,CA3ED;;AA4EA,iEAAeT,QAAf,E;;;;;;;;;;;;ACxFA;;;;;;;;;;;;;ACAA","file":"scripts/src_pages_BestPratice_bestPratice_tsx.bundle.js","sourcesContent":["import \"./Loading.css\";\nimport React, { FC, ReactNode } from \"react\";\n\ntype props = {\n  children?: ReactNode;\n  bgOpacity?: Boolean;\n};\nconst Loading: FC<props> = ({ bgOpacity = true }) => {\n  return (\n    <>\n      <div\n        className={`components-loading ${\n          bgOpacity ? \"components-loading-opacity\" : \"\"\n        }`}\n      >\n      <div className=\"loading-con\">\n      <span></span>\n          <span></span>\n          <span></span>\n          <span></span>\n          <span></span>\n          <span></span>\n          <span></span>\n          <span></span>\n      </div>\n      </div>\n    </>\n  );\n};\n\nexport default Loading;","import React, { FC, ReactNode, useState, useEffect } from \"react\";\nimport \"./totast.css\";\ntype ITotast = {\n  children?: ReactNode;\n  visible: Boolean;\n  msg?: string;\n};\n\nconst Totast: FC<ITotast> = ({ visible = false, msg = \"服务开小差了\" }) => {\n  const [isShow, setIsShow] = useState(true);\n  useEffect(() => {\n    let timer = setTimeout(() => {\n      setIsShow(false);\n    }, 3000);\n    return () => {\n      clearTimeout(timer);\n    };\n  }, []);\n  return (\n    <>\n      {visible && isShow ? (\n        <div className=\"modal\">\n          <div className=\"tip-msg\">{msg}</div>\n        </div>\n      ) : null}\n    </>\n  );\n};\n\nexport default React.memo(Totast);\n","import useViewport from './useViewport';\nimport useLoginCheck from './useLoginCheck';\nexport {\n    useViewport,\n    useLoginCheck\n}","import React from \"react\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport { useState, useEffect, Children } from \"react\";\nimport { storage } from \"@utils/index\";\nimport { useRecoilState } from \"recoil\";\nimport { loginState } from \"@recoil/atoms/loginAtoms\";\nimport { initLogin } from \"@models/loginInfo\";\n\nconst loginCheck = () => {\n  // console.log(\"useLoginCheck\");\n  const history = useHistory();\n  const location = useLocation();\n  \n  const [loginStatus, setLoginStatus] = useState(0);\n  const [loginInfo, setLoginInfo] = useRecoilState(loginState);\n  useEffect(() => {\n    if (loginStatus === 0) return;\n    if (loginStatus == -4 || loginStatus == -5) {\n      setLoginInfo(initLogin());\n      storage.remove(\"userInfo\");\n      history.push({\n        pathname: \"/login\",\n        state: {\n          from: {\n            pathname: location.pathname,\n          },\n        },\n      });\n    }else{\n      alert('服务开小差了');\n    }\n  }, [loginStatus]);\n  return { loginStatus, setLoginStatus };\n};\nexport default loginCheck;\n","import { useState, useEffect } from \"react\";\n// hooks是通过链表存储的\n\nconst useViewport = () => {\n  // 定义state 获取宽度、高度\n  const [wh, setWH] = useState<number>(window.innerHeight);\n  const [ww, setWW] = useState<number>(window.innerWidth);\n\n  // 相当于didMount\n  useEffect(() => {\n    const handleWindowResize = () => {\n      setWH(window.innerHeight);\n      setWW(window.innerWidth);\n    };\n    // 操作dom\n    window.addEventListener(\"resize\", handleWindowResize);\n    // return destroy 不使用的时候可以移除\n    return () => window.removeEventListener(\"resize\", handleWindowResize);\n  }, []);\n\n  return {ww, wh};\n};\nexport default useViewport;\n","import React, { FC } from \"react\";\nexport type IBook = {\n  id: number;\n  path: string;\n  title: string;\n  poster: string;\n};\nconst Book: FC<{\n  con: IBook;\n  goInfo: (path: string, id: number) => void;\n}> = (props) => {\n  // console.log(\"藏经阁\");\n  const { goInfo, con } = props;\n  const goPraticeInfo = (path: string, id: number) => {\n    goInfo(path, id);\n  };\n  return (\n    <>\n      <div className=\"pratice-book\">\n        <ul className=\"hardcover_front\">\n          <li>\n            <div\n              className=\"coverDesign grey\"\n              style={{ backgroundImage: `url(${con.poster})` }}\n            >\n              {/* <h1>{con.title}</h1> */}\n              {/* <p>{con.info}</p> */}\n            </div>\n          </li>\n          <li></li>\n        </ul>\n        <ul className=\"page\" onClick={() => goPraticeInfo(con.path, con.id)}>\n          <li></li>\n          <li className=\"book-con\">\n            <h1>{con.title}</h1>\n            <span className=\"btn\">查看详情</span>\n          </li>\n          <li></li>\n          <li></li>\n          <li></li>\n        </ul>\n        <ul className=\"hardcover_back\">\n          <li></li>\n          <li></li>\n        </ul>\n        <ul className=\"book_spine\">\n          <li></li>\n          <li></li>\n        </ul>\n      </div>\n      {/* <div onClick={goPraticeInfo} className=\"pratice-item\">\n              JavaScript最佳实践\n            </div>\n            <div onClick={goPraticeInfo} className=\"pratice-item\">\n              大话NodeJs\n            </div>\n            <div onClick={goPraticeInfo} className=\"pratice-item\">\n              你不知道的JavaScript\n            </div> */}\n    </>\n  );\n};\nexport default React.memo(Book);\n","import React, { FC, useState, useEffect, useRef, Suspense } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport \"./bestPratice.css\";\n\nimport { pratice } from \"@api/index\";\nimport Loading from \"@components/Loading/loading\";\nimport { useLoginCheck } from \"@hooks/index\";\nimport { useRecoilValue } from \"recoil\";\nimport { loginSel } from \"@recoil/selectors/loginSelectors\";\nimport Book, { IBook } from \"./Book\";\nimport Totast from \"@components/Totast/totast\";\n\nconst QuesBank: FC<{}> = () => {\n  const history = useHistory();\n  const [bookList, setBookList] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const { setLoginStatus } = useLoginCheck();\n  const { uid } = useRecoilValue(loginSel);\n  const [isError,setIsError] = useState(false);\n  let _componentStatus = useRef(true);\n  useEffect(() => {\n    return () => {\n      _componentStatus.current = false;\n    };\n  }, []);\n  useEffect(() => {\n    pratice\n      .getBestPraticeList(uid)\n      .then((res) => {\n        if (!_componentStatus.current) {\n          _componentStatus = null;\n          return;\n        }\n        setLoginStatus(res.status);\n        let praticeList: {}[][] = [];\n        let count = 1;\n        let length = res.data.length;\n        res.data.forEach((item: {}, index: number) => {\n          if (index === 0) {\n            praticeList[count - 1] = [];\n          } else if (index === 5 * count) {\n            praticeList[count] = [];\n            count++;\n          }\n          if (index <= 5 * count) {\n            praticeList[count - 1].push(item);\n          }\n        });\n        setBookList(praticeList || []);\n        setLoading(false);\n      })\n      .catch((err) => {\n        setIsError(true);\n      });\n  }, []);\n  const goInfo = (path: string, id: number) => {\n    history.push({ pathname: `/pratice/info`, state: { path, id } });\n  };\n  return (\n    <>\n      <Suspense fallback={Loading}>\n        <div className=\"page-pratice layout-container\">\n          <div className=\"book-box\">\n            {!loading ? (\n              <img\n                src={require(\"@assets/images/bookshelf.png\")}\n                className=\"book-shelf\"\n                alt=\"\"\n              />\n            ) : null}\n            {bookList.map((item, index) => (\n              <div className=\"pratice-line\" key={index}>\n                <div className=\"pratice-item-box\">\n                  {item.map((book: IBook, bdx: number) => (\n                    <Book con={book} key={book.id} goInfo={goInfo} />\n                  ))}\n                </div>\n                {/* <div className=\"desk\"></div> */}\n              </div>\n            ))}\n          </div>\n        </div>\n        {loading ? <Loading /> : null}\n      </Suspense>\n      <Totast visible={isError} />\n    </>\n  );\n};\nexport default QuesBank;\n","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};"],"sourceRoot":""}